<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://cdn.bootcdn.net/ajax/libs/jszip/3.3.0/jszip.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/FileSaver.js/2.0.2/FileSaver.min.js"></script>
</head>
<style>
    #mycanvas {
        border: 1px solid black;
        margin: auto;
    }
</style>

<body>
</body>
<script>
    // 设置元素属性常量
    const bigImgWidth = 702,
        bigImgHeight = 1032,
        smallImgWidth = 480,
        smallImgHeight = 480,
        textWidth = 100,
        ExxtHeight = 100;

    // 设置canvase
    const canvas = document.createElement('canvas');
    canvas.width = bigImgWidth;
    canvas.height = bigImgHeight;
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
    ctx.font = " 24px PingFangSC ";

    // 创建一个zip对象, 用来进行压缩下载
    const zip = new JSZip();

    // 加载图片
    const img1 = new Image();
    const img2 = new Image();
    img1.src = '../source/imgs/社群背景图.png';
    img2.src = '../source/imgs/美女1.jpg';


    function myonload() {
        if (img1.complete && img2.complete) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // 进行渲染
            ctx.drawImage(img1, 0, 0, bigImgWidth, bigImgHeight);
            ctx.drawImage(img2, 111, 351, smallImgWidth, smallImgHeight);
            ctx.fillText('美女-1001', 280, 843);

            // 进行压缩下载
            canvas.toBlob(data => {
                zip.file('图片.png', data, { base64: true });
                zip.generateAsync({ type: "blob" }).then(function (content) {
                    saveAs(content, "压缩包.zip");
                });
            });
        }
    };
    img2.onload = myonload;
    img1.onload = myonload;

    document.body.appendChild(canvas);
</script>

</html>